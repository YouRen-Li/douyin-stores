# Douyin Mini Program Utilities

æœ¬é¡¹ç›®ä¸º **æŠ–éŸ³å°ç¨‹åº** å¼€å‘æä¾›äº†ä¸€å¥—å¸¸ç”¨å·¥å…·å°è£…ï¼ŒåŒ…æ‹¬ï¼š

- **HTTP è¯·æ±‚å°è£…**ï¼šåŸºäº `tt.request`ï¼Œæ”¯æŒ `GET / POST / PUT / DELETE`ï¼Œè‡ªåŠ¨å¤„ç†åŸºç¡€ URLã€è¯·æ±‚å¤´ã€401 é”™è¯¯ç­‰ã€‚
- **å…¨å±€çŠ¶æ€ç®¡ç†**ï¼šåŸºäº `mini-stores` æ€æƒ³äºŒæ¬¡å°è£…ï¼Œä¸“é—¨é€‚é…æŠ–éŸ³å°ç¨‹åºé¡µé¢ç”Ÿå‘½å‘¨æœŸä¸æ•°æ®ç»‘å®šã€‚
- **ç”¨æˆ·ä¿¡æ¯ç®¡ç†**ï¼šæä¾›ç”¨æˆ·ä¿¡æ¯çš„æœ¬åœ°å­˜å‚¨ã€æ›´æ–°ã€è·å–ç­‰åŠŸèƒ½ã€‚

## ç‰¹æ€§

- ğŸš€ **Promise åŒ– API**  
  å°† `tt.request`ã€`tt.login` ç­‰æŠ–éŸ³å°ç¨‹åº API å°è£…ä¸º `Promise`ï¼Œæ›´æ˜“äºåœ¨ `async/await` ä¸­ä½¿ç”¨ã€‚
- ğŸ“¦ **å…¨å±€çŠ¶æ€ç®¡ç†**  
  æ”¯æŒç»„ä»¶ä¸é¡µé¢ç»‘å®šï¼Œè‡ªåŠ¨è§¦å‘æ•°æ®æ›´æ–°ï¼Œå¹¶æ”¯æŒè®¡ç®—å±æ€§ï¼ˆ`computed`ï¼‰ã€‚
- ğŸ”’ **è¯·æ±‚å¼‚å¸¸å¤„ç†**  
  å¯¹ 401 é”™è¯¯è¿›è¡Œè‡ªåŠ¨å¤„ç†ï¼ˆæ— æ•ˆã€è¿‡æœŸã€æ— æƒé™ï¼‰ï¼Œå¹¶æ”¯æŒè·³è½¬ç™»å½•é¡µã€‚
- ğŸ‘¤ **ç”¨æˆ·ä¿¡æ¯æŒä¹…åŒ–**  
  è‡ªåŠ¨ä»æœ¬åœ°ç¼“å­˜åŠ è½½ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶æä¾›æ‰‹æœºå·è„±æ•ç­‰åŠŸèƒ½ã€‚

## ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ store.js        # å…¨å±€çŠ¶æ€ç®¡ç†æ ¸å¿ƒ
â”œâ”€â”€ userStore.js    # ç”¨æˆ·ä¿¡æ¯çŠ¶æ€ç®¡ç†
â”œâ”€â”€ http.js         # HTTP è¯·æ±‚å°è£…
â””â”€â”€ README.md
```

## å®‰è£…

å°†æœ¬é¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ°æŠ–éŸ³å°ç¨‹åºé¡¹ç›®çš„ `utils/` ç›®å½•ä¸‹ï¼š

```
utils/
â”œâ”€â”€ http.js
â”œâ”€â”€ store.js
â””â”€â”€ userStore.js
```

## ä½¿ç”¨æ–¹æ³•

### 1. HTTP è¯·æ±‚

```js
import http from "@/utils/http";

// GET è¯·æ±‚
const res = await http.get("/api/user", { id: 123 });
console.log(res);

// POST è¯·æ±‚
await http.post("/api/login", { username: "test", password: "123456" });
```

### 2. å…¨å±€çŠ¶æ€ç»‘å®š

åœ¨é¡µé¢ä¸­ç»‘å®šå…¨å±€ storeï¼š

```js
import { Store } from "@/utils/store";
import userStore from "@/utils/userStore";

Page({
  data: {},
  onLoad() {
    userStore.bind(this, "$store");
  },
  onUnload() {
    userStore.unbind(this);
  }
});
```

é¡µé¢ä¸­å³å¯é€šè¿‡ `this.data.$store.userInfo` è®¿é—®å…¨å±€ç”¨æˆ·ä¿¡æ¯ã€‚

### 3. æ›´æ–°ä¸è·å–ç”¨æˆ·ä¿¡æ¯

```js
// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
userStore.updateUserInfo({
  nickName: "æ–°çš„æ˜µç§°"
});

// è·å–ç”¨æˆ·ä¿¡æ¯
const info = userStore.getCurrentUserInfo();
console.log(info);
```

### 4. è·å–è„±æ•æ‰‹æœºå·

```js
const maskedPhone = userStore.getMaskedPhone();
console.log(maskedPhone); // ä¾‹å¦‚ 138****1234
```

---

å¦‚éœ€æ›´å¤šç”¨æ³•å’Œæ‰©å±•ï¼Œè¯·å‚è€ƒå„å·¥å…·æ–‡ä»¶ä¸­
